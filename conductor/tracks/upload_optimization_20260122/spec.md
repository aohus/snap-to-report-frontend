# Specification - 사진 업로드 성능 최적화 및 고속 업로드 UI 구현

## 1. 개요
현재 `snap-2-report` 프로젝트의 최우선 과제인 '사진 업로드 시간 단축'을 해결하기 위해, 기술적 최적화와 사용자 경험(UX) 개선을 동시에 진행합니다. 사용자가 수십 장의 고해상도 사진을 한꺼번에 올려도 시스템이 멈추지 않고, 현재 진행 상황을 명확하게 인지할 수 있도록 합니다.

## 2. 목표
- **성능:** 대량 사진(50장 이상) 업로드 시 병렬 처리 및 클라이언트 측 압축을 통해 전체 소요 시간 50% 이상 단축.
- **안정성:** 업로드 중 오류 발생 시 개별 사진 단위의 재시도 로직 구현 및 사용자 알림.
- **UX:** 진행률(퍼센트, 개수) 표시 및 낙관적 UI를 통한 즉각적인 반응성 제공.
- **접근성:** 디지털 취약 계층을 위한 크고 직관적인 UI 요소 배치.

## 3. 상세 기능

### 3.1. 고속 업로드 엔진 최적화
- **병렬 처리:** `p-limit`을 활용하여 네트워크 대역폭과 브라우저 리소스를 고려한 최적의 병렬 업로드 개수(예: 3~5개) 제어.
- **백그라운드 압축:** `browser-image-compression` 및 `pica`를 Web Worker에서 실행하여 메인 스레드 차단(화면 멈춤) 방지.
- **메타데이터 보존:** 압축 과정에서도 촬영 일시, 위치 정보(EXIF)가 손실되지 않도록 처리.

### 3.2. 고속 업로드 UI (Wizard 스타일)
- **1단계 (선택):** 사진 선택 시 '낙관적 UI'를 적용하여 선택 즉시 화면에 썸네일 노출.
- **2단계 (업로드 중):** 
  - 전체 진행률 표시줄 (Total Progress Bar).
  - 개별 항목별 업로드 상태 (대기/처리 중/완료/실패).
- **3단계 (완료):** 업로드 완료 시 친절한 축하 메시지와 함께 '메모 추가' 단계로의 명확한 행동 유도.

### 3.3. 안정성 및 피드백
- **오류 처리:** 네트워크 단절 시 업로드 중단된 지점부터 재개할 수 있는 인터페이스 고려.
- **상태 안내:** "사진을 예쁘게 다듬고 있어요(압축 중)", "서버로 안전하게 보내는 중이에요(업로드 중)" 등 쉬운 문구 사용.

## 4. 기술적 고려 사항
- **State Management:** Zustand를 사용하여 업로드 큐(Queue)와 상태를 전역적으로 관리.
- **Data Fetching:** TanStack Query의 `useMutation`을 활용하여 업로드 요청 및 캐시 업데이트.
- **Performance:** `React.memo` 및 가상화 리스트(필요 시)를 사용하여 대량 썸네일 렌더링 최적화.
